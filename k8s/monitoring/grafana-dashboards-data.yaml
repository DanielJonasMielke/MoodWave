# Grafana Dashboards Data ConfigMap
# Auto-generated with working Prometheus queries
apiVersion: v1
kind: ConfigMap
metadata:
  name: grafana-dashboards-data
  namespace: default
  labels:
    app: moodwave
    component: grafana
    grafana_dashboard: '1'
data:
  cluster-overview.json: "{\n  \"title\": \"Kubernetes Cluster Overview\",\n  \"uid\": \"cluster-overview\",\n  \"tags\": [\n    \"kubernetes\",\n    \"cluster\",\n    \"moodwave\"\n  ],\n  \"timezone\": \"browser\",\n  \"schemaVersion\": 39,\n  \"version\": 1,\n  \"refresh\": \"30s\",\n  \"editable\": true,\n  \"panels\": [\n    {\n      \"id\": 1,\n      \"title\": \"Cluster Overview\",\n      \"type\": \"stat\",\n      \"gridPos\": {\n        \"h\": 4,\n        \"w\": 24,\n        \"x\": 0,\n        \"y\": 0\n      },\n      \"targets\": [\n        {\n          \"expr\": \"count(kube_node_info)\",\n          \"legendFormat\": \"Nodes\",\n          \"refId\": \"A\"\n        },\n        {\n          \"expr\": \"count(kube_pod_info{namespace=\\\"default\\\"})\",\n          \"legendFormat\": \"Pods\",\n          \"refId\": \"B\"\n        },\n        {\n          \"expr\": \"count(kube_deployment_status_replicas{namespace=\\\"default\\\"})\",\n          \"legendFormat\": \"Deployments\",\n\
    \          \"refId\": \"C\"\n        }\n      ],\n      \"options\": {\n        \"reduceOptions\": {\n          \"values\": false,\n          \"calcs\": [\n            \"lastNotNull\"\n          ]\n        },\n        \"orientation\": \"horizontal\",\n        \"textMode\": \"value_and_name\",\n        \"colorMode\": \"value\"\n      },\n      \"fieldConfig\": {\n        \"defaults\": {\n          \"unit\": \"short\",\n          \"color\": {\n            \"mode\": \"thresholds\"\n          },\n          \"thresholds\": {\n            \"mode\": \"absolute\",\n            \"steps\": [\n              {\n                \"value\": null,\n                \"color\": \"green\"\n              }\n            ]\n          }\n        }\n      }\n    },\n    {\n      \"id\": 2,\n      \"title\": \"Container CPU Usage\",\n      \"type\": \"timeseries\",\n      \"gridPos\": {\n        \"h\": 8,\n        \"w\": 12,\n        \"x\": 0,\n        \"y\": 4\n      },\n      \"targets\": [\n        {\n   \
    \       \"expr\": \"sum(rate(container_cpu_usage_seconds_total{namespace=\\\"default\\\",container!=\\\"\\\",container!=\\\"POD\\\"}[5m])) by (pod)\",\n          \"legendFormat\": \"{{pod}}\",\n          \"refId\": \"A\"\n        }\n      ],\n      \"fieldConfig\": {\n        \"defaults\": {\n          \"unit\": \"percentunit\",\n          \"custom\": {\n            \"drawStyle\": \"line\",\n            \"lineInterpolation\": \"smooth\",\n            \"fillOpacity\": 10,\n            \"showPoints\": \"never\"\n          }\n        }\n      }\n    },\n    {\n      \"id\": 3,\n      \"title\": \"Container Memory Usage\",\n      \"type\": \"timeseries\",\n      \"gridPos\": {\n        \"h\": 8,\n        \"w\": 12,\n        \"x\": 12,\n        \"y\": 4\n      },\n      \"targets\": [\n        {\n          \"expr\": \"sum(container_memory_working_set_bytes{namespace=\\\"default\\\",container!=\\\"\\\",container!=\\\"POD\\\"}) by (pod)\",\n          \"legendFormat\": \"{{pod}}\",\n       \
    \   \"refId\": \"A\"\n        }\n      ],\n      \"fieldConfig\": {\n        \"defaults\": {\n          \"unit\": \"bytes\",\n          \"custom\": {\n            \"drawStyle\": \"line\",\n            \"lineInterpolation\": \"smooth\",\n            \"fillOpacity\": 10,\n            \"showPoints\": \"never\"\n          }\n        }\n      }\n    },\n    {\n      \"id\": 4,\n      \"title\": \"Pod Status\",\n      \"type\": \"table\",\n      \"gridPos\": {\n        \"h\": 8,\n        \"w\": 24,\n        \"x\": 0,\n        \"y\": 12\n      },\n      \"targets\": [\n        {\n          \"expr\": \"kube_pod_status_phase{namespace=\\\"default\\\"}\",\n          \"legendFormat\": \"{{pod}} - {{phase}}\",\n          \"refId\": \"A\",\n          \"instant\": true\n        }\n      ],\n      \"options\": {\n        \"showHeader\": true\n      },\n      \"fieldConfig\": {\n        \"defaults\": {\n          \"custom\": {\n            \"align\": \"left\"\n          }\n        }\n      }\n    }\n\
    \  ]\n}"
  kafka-monitoring.json: "{\n  \"title\": \"Kafka Monitoring\",\n  \"uid\": \"kafka-monitoring\",\n  \"tags\": [\n    \"kafka\",\n    \"messaging\",\n    \"moodwave\"\n  ],\n  \"timezone\": \"browser\",\n  \"schemaVersion\": 39,\n  \"version\": 1,\n  \"refresh\": \"30s\",\n  \"editable\": true,\n  \"panels\": [\n    {\n      \"id\": 1,\n      \"title\": \"Kafka Broker Status\",\n      \"type\": \"stat\",\n      \"gridPos\": {\n        \"h\": 4,\n        \"w\": 24,\n        \"x\": 0,\n        \"y\": 0\n      },\n      \"targets\": [\n        {\n          \"expr\": \"kafka_brokers\",\n          \"legendFormat\": \"Brokers\",\n          \"refId\": \"A\"\n        },\n        {\n          \"expr\": \"count(kafka_topic_partitions)\",\n          \"legendFormat\": \"Topics\",\n          \"refId\": \"B\"\n        }\n      ],\n      \"options\": {\n        \"reduceOptions\": {\n          \"values\": false,\n          \"calcs\": [\n            \"lastNotNull\"\n          ]\n        },\n        \"orientation\"\
    : \"horizontal\",\n        \"textMode\": \"value_and_name\",\n        \"colorMode\": \"value\"\n      },\n      \"fieldConfig\": {\n        \"defaults\": {\n          \"unit\": \"short\",\n          \"color\": {\n            \"mode\": \"thresholds\"\n          },\n          \"thresholds\": {\n            \"mode\": \"absolute\",\n            \"steps\": [\n              {\n                \"value\": null,\n                \"color\": \"green\"\n              }\n            ]\n          }\n        }\n      }\n    },\n    {\n      \"id\": 2,\n      \"title\": \"Topic Partition Offsets\",\n      \"type\": \"timeseries\",\n      \"gridPos\": {\n        \"h\": 8,\n        \"w\": 12,\n        \"x\": 0,\n        \"y\": 4\n      },\n      \"targets\": [\n        {\n          \"expr\": \"kafka_topic_partition_current_offset\",\n          \"legendFormat\": \"{{topic}}-p{{partition}}\",\n          \"refId\": \"A\"\n        }\n      ],\n      \"fieldConfig\": {\n        \"defaults\": {\n          \"\
    unit\": \"short\",\n          \"custom\": {\n            \"drawStyle\": \"line\",\n            \"lineInterpolation\": \"smooth\",\n            \"fillOpacity\": 0,\n            \"showPoints\": \"never\"\n          }\n        }\n      }\n    },\n    {\n      \"id\": 3,\n      \"title\": \"Kafka Pod CPU Usage\",\n      \"type\": \"timeseries\",\n      \"gridPos\": {\n        \"h\": 8,\n        \"w\": 12,\n        \"x\": 12,\n        \"y\": 4\n      },\n      \"targets\": [\n        {\n          \"expr\": \"sum(rate(container_cpu_usage_seconds_total{pod=~\\\"kafka.*\\\",container!=\\\"\\\",container!=\\\"POD\\\"}[5m])) by (pod)\",\n          \"legendFormat\": \"{{pod}}\",\n          \"refId\": \"A\"\n        }\n      ],\n      \"fieldConfig\": {\n        \"defaults\": {\n          \"unit\": \"percentunit\",\n          \"custom\": {\n            \"drawStyle\": \"line\",\n            \"lineInterpolation\": \"smooth\",\n            \"fillOpacity\": 10,\n            \"showPoints\": \"never\"\
    \n          }\n        }\n      }\n    },\n    {\n      \"id\": 4,\n      \"title\": \"Kafka Pod Memory Usage\",\n      \"type\": \"timeseries\",\n      \"gridPos\": {\n        \"h\": 8,\n        \"w\": 12,\n        \"x\": 0,\n        \"y\": 12\n      },\n      \"targets\": [\n        {\n          \"expr\": \"sum(container_memory_working_set_bytes{pod=~\\\"kafka.*\\\",container!=\\\"\\\",container!=\\\"POD\\\"}) by (pod)\",\n          \"legendFormat\": \"{{pod}}\",\n          \"refId\": \"A\"\n        }\n      ],\n      \"fieldConfig\": {\n        \"defaults\": {\n          \"unit\": \"bytes\",\n          \"custom\": {\n            \"drawStyle\": \"line\",\n            \"lineInterpolation\": \"smooth\",\n            \"fillOpacity\": 10,\n            \"showPoints\": \"never\"\n          }\n        }\n      }\n    },\n    {\n      \"id\": 5,\n      \"title\": \"Topics Overview\",\n      \"type\": \"table\",\n      \"gridPos\": {\n        \"h\": 8,\n        \"w\": 12,\n        \"x\": 12,\n\
    \        \"y\": 12\n      },\n      \"targets\": [\n        {\n          \"expr\": \"kafka_topic_partitions\",\n          \"legendFormat\": \"{{topic}}\",\n          \"refId\": \"A\",\n          \"instant\": true\n        },\n        {\n          \"expr\": \"sum by (topic) (kafka_topic_partition_current_offset)\",\n          \"legendFormat\": \"{{topic}}\",\n          \"refId\": \"B\",\n          \"instant\": true\n        }\n      ],\n      \"options\": {\n        \"showHeader\": true\n      },\n      \"fieldConfig\": {\n        \"defaults\": {\n          \"custom\": {\n            \"align\": \"left\"\n          }\n        }\n      }\n    }\n  ]\n}"
  spark-monitoring.json: "{\n  \"title\": \"Spark Streaming Monitoring\",\n  \"uid\": \"spark-monitoring\",\n  \"tags\": [\n    \"spark\",\n    \"streaming\",\n    \"moodwave\"\n  ],\n  \"timezone\": \"browser\",\n  \"schemaVersion\": 39,\n  \"version\": 1,\n  \"refresh\": \"30s\",\n  \"editable\": true,\n  \"panels\": [\n    {\n      \"id\": 1,\n      \"title\": \"Spark Consumer Status\",\n      \"type\": \"stat\",\n      \"gridPos\": {\n        \"h\": 4,\n        \"w\": 24,\n        \"x\": 0,\n        \"y\": 0\n      },\n      \"targets\": [\n        {\n          \"expr\": \"kube_pod_status_phase{pod=~\\\"spark-consumer.*\\\",phase=\\\"Running\\\"}\",\n          \"legendFormat\": \"Status\",\n          \"refId\": \"A\"\n        },\n        {\n          \"expr\": \"sum(container_memory_working_set_bytes{pod=~\\\"spark-consumer.*\\\",container!=\\\"\\\",container!=\\\"POD\\\"})\",\n          \"legendFormat\": \"Memory\",\n          \"refId\": \"B\"\n        }\n      ],\n      \"options\"\
    : {\n        \"reduceOptions\": {\n          \"values\": false,\n          \"calcs\": [\n            \"lastNotNull\"\n          ]\n        },\n        \"orientation\": \"horizontal\",\n        \"textMode\": \"value_and_name\",\n        \"colorMode\": \"value\"\n      },\n      \"fieldConfig\": {\n        \"defaults\": {\n          \"unit\": \"short\",\n          \"color\": {\n            \"mode\": \"thresholds\"\n          },\n          \"thresholds\": {\n            \"mode\": \"absolute\",\n            \"steps\": [\n              {\n                \"value\": null,\n                \"color\": \"green\"\n              }\n            ]\n          }\n        },\n        \"overrides\": [\n          {\n            \"matcher\": {\n              \"id\": \"byFrameRefID\",\n              \"options\": \"B\"\n            },\n            \"properties\": [\n              {\n                \"id\": \"unit\",\n                \"value\": \"bytes\"\n              }\n            ]\n          }\n    \
    \    ]\n      }\n    },\n    {\n      \"id\": 2,\n      \"title\": \"Spark CPU Usage\",\n      \"type\": \"timeseries\",\n      \"gridPos\": {\n        \"h\": 8,\n        \"w\": 12,\n        \"x\": 0,\n        \"y\": 4\n      },\n      \"targets\": [\n        {\n          \"expr\": \"sum(rate(container_cpu_usage_seconds_total{pod=~\\\"spark-consumer.*\\\",container!=\\\"\\\",container!=\\\"POD\\\"}[5m])) by (pod)\",\n          \"legendFormat\": \"{{pod}}\",\n          \"refId\": \"A\"\n        }\n      ],\n      \"fieldConfig\": {\n        \"defaults\": {\n          \"unit\": \"percentunit\",\n          \"custom\": {\n            \"drawStyle\": \"line\",\n            \"lineInterpolation\": \"smooth\",\n            \"fillOpacity\": 10,\n            \"showPoints\": \"never\"\n          }\n        }\n      }\n    },\n    {\n      \"id\": 3,\n      \"title\": \"Spark Memory Usage\",\n      \"type\": \"timeseries\",\n      \"gridPos\": {\n        \"h\": 8,\n        \"w\": 12,\n        \"\
    x\": 12,\n        \"y\": 4\n      },\n      \"targets\": [\n        {\n          \"expr\": \"sum(container_memory_working_set_bytes{pod=~\\\"spark-consumer.*\\\",container!=\\\"\\\",container!=\\\"POD\\\"}) by (pod)\",\n          \"legendFormat\": \"{{pod}}\",\n          \"refId\": \"A\"\n        }\n      ],\n      \"fieldConfig\": {\n        \"defaults\": {\n          \"unit\": \"bytes\",\n          \"custom\": {\n            \"drawStyle\": \"line\",\n            \"lineInterpolation\": \"smooth\",\n            \"fillOpacity\": 10,\n            \"showPoints\": \"never\"\n          }\n        }\n      }\n    },\n    {\n      \"id\": 4,\n      \"title\": \"Network I/O\",\n      \"type\": \"timeseries\",\n      \"gridPos\": {\n        \"h\": 8,\n        \"w\": 12,\n        \"x\": 0,\n        \"y\": 12\n      },\n      \"targets\": [\n        {\n          \"expr\": \"sum(rate(container_network_receive_bytes_total{pod=~\\\"spark-consumer.*\\\"}[5m])) by (pod)\",\n          \"legendFormat\"\
    : \"RX - {{pod}}\",\n          \"refId\": \"A\"\n        },\n        {\n          \"expr\": \"sum(rate(container_network_transmit_bytes_total{pod=~\\\"spark-consumer.*\\\"}[5m])) by (pod)\",\n          \"legendFormat\": \"TX - {{pod}}\",\n          \"refId\": \"B\"\n        }\n      ],\n      \"fieldConfig\": {\n        \"defaults\": {\n          \"unit\": \"Bps\",\n          \"custom\": {\n            \"drawStyle\": \"line\",\n            \"lineInterpolation\": \"smooth\",\n            \"fillOpacity\": 10,\n            \"showPoints\": \"never\"\n          }\n        }\n      }\n    },\n    {\n      \"id\": 5,\n      \"title\": \"Pod Restarts\",\n      \"type\": \"stat\",\n      \"gridPos\": {\n        \"h\": 8,\n        \"w\": 12,\n        \"x\": 12,\n        \"y\": 12\n      },\n      \"targets\": [\n        {\n          \"expr\": \"sum(kube_pod_container_status_restarts_total{pod=~\\\"spark-consumer.*\\\"})\",\n          \"legendFormat\": \"Total Restarts\",\n          \"refId\":\
    \ \"A\"\n        }\n      ],\n      \"options\": {\n        \"colorMode\": \"background\",\n        \"graphMode\": \"area\",\n        \"orientation\": \"auto\"\n      },\n      \"fieldConfig\": {\n        \"defaults\": {\n          \"unit\": \"short\",\n          \"color\": {\n            \"mode\": \"thresholds\"\n          },\n          \"thresholds\": {\n            \"mode\": \"absolute\",\n            \"steps\": [\n              {\n                \"value\": null,\n                \"color\": \"green\"\n              },\n              {\n                \"value\": 1,\n                \"color\": \"yellow\"\n              },\n              {\n                \"value\": 5,\n                \"color\": \"red\"\n              }\n            ]\n          }\n        }\n      }\n    }\n  ]\n}"
